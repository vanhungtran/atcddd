% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/api.R
\name{get_atc_data}
\alias{get_atc_data}
\title{Get ATC Classification Data from WHO Database}
\source{
WHO Collaborating Centre for Drug Statistics Methodology:
\url{https://www.whocc.no/atc_ddd_index/}
}
\usage{
get_atc_data(
  codes = NULL,
  include_children = FALSE,
  rate_limit = 0.5,
  use_cache = TRUE
)
}
\arguments{
\item{codes}{Character vector; one or more ATC codes to retrieve.
Can be Level 1 (e.g., "N"), Level 2 (e.g., "N02"), Level 3 (e.g., "N02B"),
Level 4 (e.g., "N02BE"), or Level 5 (e.g., "N02BE01").
If NULL, returns data for all 14 main anatomical groups.}

\item{include_children}{Logical; if TRUE, also retrieves all child codes
in the hierarchy below the specified codes. Default is FALSE.}

\item{rate_limit}{Numeric; minimum delay in seconds between requests
to respect WHO server load. Default is 0.5 seconds.}

\item{use_cache}{Logical; if TRUE, uses filesystem caching to avoid
redundant requests. Default is TRUE.}
}
\value{
A tibble with the following columns:
\itemize{
\item \code{atc_code}: The ATC code (e.g., "N02BE01")
\item \code{atc_name}: Name/description of the substance or group
\item \code{level}: Hierarchy level (1-5)
\item \code{ddd}: Defined Daily Dose value (if available)
\item \code{uom}: Unit of measurement for DDD (e.g., "g", "mg")
\item \code{adm_r}: Route of administration (e.g., "O" for oral, "P" for parenteral)
\item \code{note}: Additional notes or comments
}
}
\description{
Retrieves ATC (Anatomical Therapeutic Chemical) classification data
for a specific code or codes from the WHO Collaborating Centre for
Drug Statistics Methodology database.

This function provides structured access to the ATC hierarchy and DDD
(Defined Daily Dose) information through a clean API-style interface.
}
\details{
This function provides a cleaner, API-style interface to the WHO ATC/DDD
database compared to the lower-level \code{\link{atc_crawl}} function.
It automatically handles:
\itemize{
\item Input validation for ATC code format
\item Rate limiting to respect WHO server policies
\item Caching via \pkg{memoise} to minimize redundant requests
\item Error handling with informative messages
\item Consistent tibble output format
}

Returns \code{NULL} with a message if:
\itemize{
\item Invalid ATC codes are provided
\item Network connection fails
\item No data is available for the requested codes
}
}
\note{
Requires an internet connection to access the WHO database.
First-time requests may be slower due to network latency;
subsequent requests use cached data when \code{use_cache = TRUE}.
}
\section{Rate Limiting}{

To be respectful of WHO server resources, this function enforces
a minimum delay between requests. The default is 0.5 seconds,
which translates to a maximum of 2 requests per second.
}

\examples{
\donttest{
# Get data for a specific drug (aspirin)
get_atc_data("N02BA01")

# Get data for all analgesics (Level 2)
get_atc_data("N02")

# Get cardiovascular and nervous system main groups
get_atc_data(c("C", "N"))

# Get all child codes under opioids
get_atc_data("N02A", include_children = TRUE)

# Get all main anatomical groups
get_atc_data()
}

}
\seealso{
\code{\link{atc_crawl}} for lower-level crawling functionality,
\code{\link{atc_roots_default}} for main anatomical groups,
\code{\link{is_valid_atc_code}} for code validation
}
