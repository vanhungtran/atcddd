% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/crawl.R
\name{.empty_ddd}
\alias{.empty_ddd}
\title{Crawl the WHO ATC/DDD Index}
\usage{
.empty_ddd()
}
\arguments{
\item{roots}{Character vector of root ATC codes to start from.
Default: anatomical main groups A-V (see \code{\link{atc_roots_default}}).
Must be uppercase alphanumeric codes.}

\item{rate}{Numeric; minimum seconds between HTTP requests (default: 0.5).
Increase this value for more conservative crawling.}

\item{progress}{Logical; show a progress bar (default: \code{interactive()}).
Set to \code{FALSE} for batch processing or scripting.}

\item{max_codes}{Integer; limit on number of codes to visit (default: Inf).
Useful for testing or partial crawls. Set to a finite value to limit scope.}

\item{quiet}{Logical; reduce informational messages (default: FALSE).
Note: Messages have been suppressed in this version.}
}
\value{
A list with two components:
\describe{
\item{codes}{A tibble with columns:
\itemize{
\item \code{atc_code}: Character; the ATC code (uppercase)
\item \code{atc_name}: Character; the WHO description/name
}
}
\item{ddd}{A tibble with columns:
\itemize{
\item \code{source_code}: Character; the parent code where this DDD was found
\item \code{atc_code}: Character; the specific drug's ATC code
\item \code{atc_name}: Character; drug name
\item \code{ddd}: Character; defined daily dose value
\item \code{uom}: Character; unit of measure
\item \code{adm_r}: Character; administration route
\item \code{note}: Character; additional notes
}
}
}
}
\description{
Iteratively traverses ATC codes starting from one or more root codes,
respecting rate limits and using the HTTP layer's caching. Returns two
tidy tables: \code{codes} (unique ATC codes with names) and \code{ddd}
(dose definitions and related fields).

This function implements a breadth-first traversal of the ATC hierarchy,
automatically discovering child codes and handling both parent nodes
(with child links) and leaf nodes (with DDD tables).
}
\details{
Crawl the WHO ATC/DDD Index
}
\section{Caching}{

Results are cached at the HTTP level using the \code{memoise} package.
The cache is stored in the user's cache directory (see \code{rappdirs::user_cache_dir}).
To clear the cache, delete the cache directory or restart R.
}

\section{Rate Limiting}{

The function respects the \code{rate} parameter by enforcing a minimum delay
between consecutive HTTP requests. This helps prevent overloading the WHO server.
}

\examples{
\dontrun{
# Crawl a single anatomical group (Dermatologicals)
res_d <- atc_crawl(roots = "D", rate = 0.8, max_codes = 50)
head(res_d$codes)
head(res_d$ddd)

# Crawl multiple groups
res_multi <- atc_crawl(roots = c("A", "B"), rate = 1.0)

# Full crawl (may take several minutes)
res_all <- atc_crawl(progress = TRUE)
nrow(res_all$codes)  # Total unique codes
nrow(res_all$ddd)    # Total DDD entries
}

}
\seealso{
\code{\link{atc_write_csv}} for exporting results,
\code{\link{atc_roots_default}} for default root codes
}
